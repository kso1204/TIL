# FTP

1. FTP 능동(Active) Mode

일반적으로 능동모드가 FTP 클라이언트의 기본 값으로 설정된다. 

클라이언트에서 서버 측 21번 포트로 접속하여 제어채널을 생성하고 데이터는 서버에서 클라이언트로 접촉하여 데이터를 보내는 방식이다.

만약 클라이언트PC에 방화벽이 설치되어 외부에서의 접속을 허용하지 않는다면 FTP접속은 되지만(제어채널은 연결되지만) 이후 데이터채널 연결이 불가능하여 파일을 받을 수 없는 문제가 발생한다.

FTP 클라이언트는 FTP 서버의 21번 포트로 연결 설정하여 제어(Control)채널을 생성한다.

사용자가 파일 목록을 보기 위해 "ls" 명령을 입력하면 FTP 클라이언트는 사용할 임시포트(1024이상 포트)를 결정하여 FTP서버에 알린다.

FTP 서버는 FTP 클라이언트가 알려준 포트로 연결을 설정하여 데이터 채널을 설정한다.

데이터채널을 통해 데이터를 송신한 후 데이터채널 연결을 종료한다.

2. FTP 수동(Passive) Mode

클라이언트에서 서버 측 21번 포트로 접속하여 제어채널을 생성하고 데이터채널도 클라이언트에서 서버로 접속하여 데이터를 보내는 방식이다.

FTP 클라이언트는 FTP 서버의 21번 포트로 연결 설정하여 제어(Control)채널을 생성한다.

사용자가 파일 목록을 보기 위해 "ls" 명령을 입력하면 FTP 클라이언트는 수동모드로 연결하기 위해 PASV명령을 전송하고

이 명령을 받은 FTP 서버는 사용할 임시 포트(1024이상 포트)를 결정하여 FTP 클라이언트에게 알려준다.

FTP 클라이언트는 FTP 서버가 알려준 포트로 연결을 설정하여 데이터 채널을 설정한다.

데이터채널을 통해 데이터를 송신한 후 데이터채널 연결을 종료한다.
