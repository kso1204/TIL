# 자바에서 Thread 만들기

# Thread 란?

1. 메모리에 올라간 상태.. process

2. 실행이 되려면 cpu를 점유해야 한다..?

3. 모든 실행은 thread 기반이다?

4. 이 쓰레드가 cpu를 점유해야 실행이 된다

5. 그 부분을 컨트롤 하는 scheduler

6. 하나의 프로그램이 process가 되고

7. process가 실행이 되기 위해 thread

8. process - 실행 중인 프로그램, 프로그램이 실행되면 OS로부터 메모리를 할당받아 프로세스 상태가 됨

9. thread - 하나의 프로세스는 하나 이상의 thread를 가지게 되고, 실제 작업을 수행하는 단위는 thread임

# mutil-threading

1. 여러 thread가 동시에 수행되는 프로그래밍, 여러 작업이 동시에 실행되는 효과

2. thread는 각각 자신만의 작업 공간을 가짐 (context)

3. 각 thread 사이에서 공유하는 자원(shared memory)이 있을 수 있음 (자바에서는 static instance)

4. 여러 thread가 자원을 공유하여 작업이 수행되는 경우 서로 자원을 차지하려는 race condition이 발생할 수 있음

5. 이렇게 여러 thread가 공유하는 자원 중 경쟁이 발생하는 부분을 critical section이라고 함

6. critical section에 대한 동기화(일종의 순차적 수행)를 구현하지 않으면 오류가 발생할 수 있음

```


package ch20;

class MyThread extends Thread {
	
	public void run() {
		
		int i;
		
		for (i=1; i<=200; i++) {
				System.out.print(i + "\t");
		}
	}
	
}

public class ThreadTest {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		
		System.out.println(Thread.currentThread() + "start");
		MyThread th1 = new MyThread();
		MyThread th2 = new MyThread();
		
		th1.start();
		th2.start();
		System.out.println(Thread.currentThread() + "end");
		
	}

}


Thread[main,5,main]start
Thread[main,5,main]end
1	1	2	2	3	4	5	6	3	4	7	8	9	10	11	12	13	14	15	16	17	18	19	20	21	22	23	24	25	5	26	27	28	29	30	31	6	7	32	33	8	9	10	11	12	34	13	14	15	16	35	17	36	37	18	19	20	21	38	39	22	40	23	41	24	42	25	26	43	44	27	28	45	29	30	46	31	32	33	47	34	35	48	36	49	37	50	51	52	53	54	55	38	39	40	41	42	43	44	45	46	47	48	49	50	51	52	53	54	55	56	57	58	59	56	57	60	61	62	63	64	65	66	67	68	69	70	71	72	73	74	75	76	77	78	79	80	81	82	83	84	85	86	87	88	89	90	91	92	93	94	95	96	97	98	99	100	101	102	103	104	105	106	107	108	109	110	111	58	59	60	61	62	63	112	113	114	115	116	117	118	119	120	121	122	123	124	64	65	66	67	68	125	69	70	126	71	127	72	73	74	75	76	77	78	79	80	81	82	83	84	128	129	130	131	132	133	134	135	85	86	87	88	136	89	90	91	92	93	94	95	96	97	98	99	100	101	102	103	104	105	106	107	137	138	139	140	141	142	143	144	145	146	147	148	149	150	151	152	153	154	155	156	157	158	159	160	161	162	108	109	110	111	112	113	163	164	165	166	167	168	169	170	171	172	173	174	175	176	177	178	179	180	181	182	183	184	185	186	187	188	189	190	191	192	193	194	195	196	197	198	199	200	114	115	116	117	118	119	120	121	122	123	124	125	126	127	128	129	130	131	132	133	134	135	136	137	138	139	140	141	142	143	144	145	146	147	148	149	150	151	152	153	154	155	156	157	158	159	160	161	162	163	164	165	166	167	168	169	170	171	172	173	174	175	176	177	178	179	180	181	182	183	184	185	186	187	188	189	190	191	192	193	194	195	196	197	198	199	200	

가장 먼저 종료된 main thread

나머지는 context swtich 되는 부분



package ch20;

class MyThread implements Runnable {
	
	public void run() {
		
		int i;
		
		for (i=1; i<=200; i++) {
				System.out.print(i + "\t");
		}
	}
	
}

public class ThreadTest {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		
		System.out.println(Thread.currentThread() + "start");
		MyThread runnable = new MyThread();
		Thread th1 = new Thread(runnable);
		Thread th2 = new Thread(runnable);
		
		th1.start();
		th2.start();
		
		System.out.println(Thread.currentThread() + "end");
		
	}

}


Thread[main,5,main]start
Thread[main,5,main]end
1	2	1	3	4	5	6	2	7	8	3	9	10	4	11	12	13	14	15	16	17	18	5	6	19	20	21	22	23	7	24	25	8	26	9	27	10	28	11	12	13	29	30	14	15	31	16	32	17	33	18	19	34	35	36	37	38	39	40	41	42	43	44	45	46	47	48	49	50	51	52	53	54	55	56	20	57	21	22	58	23	59	24	25	26	27	28	29	30	60	31	61	32	62	33	63	34	64	35	65	36	66	37	67	38	39	68	69	40	70	71	72	73	74	75	41	76	42	77	43	44	78	45	46	79	80	47	48	81	82	49	50	51	83	84	52	53	54	55	56	57	58	59	60	61	62	63	64	65	66	67	68	69	70	71	85	86	72	73	87	74	75	88	89	76	77	90	91	78	79	92	93	80	94	95	96	97	98	99	100	101	81	82	83	102	103	104	105	106	107	108	109	110	111	112	113	114	115	116	117	118	119	84	85	120	86	87	88	89	121	122	123	124	125	126	127	128	129	90	130	131	91	92	132	133	134	135	136	137	138	93	94	95	96	97	98	139	140	141	142	143	144	145	146	147	148	149	150	151	152	153	154	99	155	156	100	101	102	103	104	105	106	107	108	157	158	159	160	161	162	109	110	111	112	113	114	115	116	117	118	119	120	121	122	123	124	125	126	127	128	129	130	131	132	133	134	135	136	137	138	139	140	141	142	143	144	145	146	147	148	149	150	151	152	153	154	155	156	157	158	159	160	161	162	163	164	165	166	167	168	169	170	171	172	173	174	175	176	177	178	179	180	181	182	183	184	185	186	187	188	189	190	191	192	193	194	195	196	197	198	199	200	163	164	165	166	167	168	169	170	171	172	173	174	175	176	177	178	179	180	181	182	183	184	185	186	187	188	189	190	191	192	193	194	195	196	197	198	199	200	

runnable한 객체를 만들고 이 객체를 thread에 매개변수로 넣어준다.



Runnable run = new Runnable() {

			@Override
			public void run() {
				// TODO Auto-generated method stub
				System.out.println("run");
			}
			
		};
		
		run.run();


Thread[main,5,main]start
Thread[main,5,main]end
1	2	3	1	2	3	4	5	6	7	8	9	10	11	12	13	14	4	5	15	16	run
17	18	6	19	20	21	22	7	23	8	9	24	25	10	26	11	27	12	28	13	14	15	16	17	18	19	20	21	22	29	30	23	24	25	31	26	27	32	28	29	30	31	32	33	34	35	36	37	38	39	40	41	33	42	34	43	44	45	35	36	46	47	48	37	49	50	38	39	40	41	51	42	43	44	45	52	53	54	55	56	57	58	59	60	61	62	63	64	65	66	67	68	69	70	71	72	73	46	47	48	49	50	51	52	53	74	75	76	77	78	79	80	54	55	56	57	58	81	82	59	60	83	84	61	85	86	87	88	89	90	91	92	93	94	95	96	97	98	99	100	101	102	103	104	105	106	62	63	64	65	66	107	108	109	110	111	112	113	114	115	67	116	117	118	119	120	68	69	121	122	70	123	124	71	72	125	126	73	74	75	76	77	78	127	128	129	79	80	81	130	131	132	82	83	84	85	133	134	135	86	87	88	89	90	91	92	93	94	95	96	97	98	99	100	101	102	103	136	104	105	106	137	138	139	107	108	109	110	111	112	113	114	115	116	117	118	119	120	121	122	123	124	125	126	127	128	129	130	131	132	133	134	135	136	137	138	139	140	141	142	143	144	145	146	147	148	149	150	151	140	141	142	143	144	145	146	147	148	149	150	151	152	153	154	155	156	157	158	159	160	161	162	163	164	165	166	167	168	169	152	153	154	155	156	170	171	172	173	157	174	175	158	159	160	161	162	163	164	165	166	167	168	169	170	176	177	171	172	178	179	173	174	175	176	177	178	179	180	181	182	183	184	185	186	187	188	189	180	181	182	183	184	185	186	187	188	189	190	191	192	193	194	195	196	190	191	192	193	194	195	196	197	198	199	200	197	198	199	200	

익명함수를 사용해서 구현한 thread 

```


# Thread Status

1. 