# 지은이 웨스 맥키니

- 데이터 분석, 금융, 통계 계산 애플리케이션에서 파이썬 사용을 독려하고 있다.

- 모든 코드는 파이썬 3.6기반으로 수정

- pandas 라이브러리 버전을 2017년 버전

# 필수 라이브러리

1. Numpy

- 넘파이(Numerical Python, NumPy)는 파이썬 산술 계산의 주춧돌 같은 라이브러리다.

- 자료구조, 알고리즘 산술 데이터를 다루는 대부분의 과학 계산 애플리케이션에서 필요한 라이브러리를 제공한다.

- NumPy가 제공하는 기능

```

빠르고 효율적인 다차원 배열 객체 ndarray

배열 원소를 다루거나 배열 간의 수학 계산을 수행하는 함수

디스크로부터 배열 기반의 데이터를 읽거나 쓸 수 있는 도구

선형대수 계산, 푸리에 변환, 난수 생성기

파이썬 확장과 C, C++ 코드에서 NumpPy의 자료구조에 접근하고 계산 기능을 사용할 수 있도록 해주는 C API 

```

- 고속 배열 처리 외에도 NumPy는 데이터분석 알고리즘에 사용할 데이터 컨테이너의 역할을 한다.

- 수치 데이터라면 Numpy 배열은 파이썬 내장 자료구조보다 훨씬 효율적인 방법으로 데이터를 저장하고 다룰 수 있다.

2. pandas

- 팬더스(pandas)는 구조화된 데이터나 표 형식의 데이터를 빠르고 쉽고 표현적으로 다루도록 설계된 고수준의 자료구조와 함수를 제공한다.

- 2010년 처음 개발되어 파이썬으로 생산적이고 강력한 데이터 분석 환경을 구성하는 데 도움을 주고 있다.

- pandas의 주된 자료구조는 표형태의 로우와 컬럼 이름을 가지는 DataFrame(데이터프레임)과 1차원 배열 객체인 Series(시리즈)다.

- pands는 'NumPy의 고성능, 배열 연산 아이디어'에 스프레드시트와 관계형 데이터베이스(SQL 같은)의 유연한 데이터 처리 기능을 결합한 것이다.

- 세련된 색인 기능을 제공하여 데이터 변형, 자르기, 취합 그리고 데이터의 부분집합을 선택할 수 있도록 해준다.

- 데이터를 처리하고 준비하고 다듬는 과정은 데이터 분석에서 가장 중요한 부분이므로 pandas는 이 책에서 우선적으로 집중하는 라이브러리다.

- pandas의 많은 기능은 R 핵심 구현의 일부 또는 애드온 패키지에서 따왔다.

- pands라는 이름은 다차원으로 구조화된 데이터를 뜻하는 경제학 용어인 패널 데이터와 파이썬 데이터 분석에서 따온 이름이다.

3. matplotlib

- matplotlib(맷플롯립)은 그래프나 2차원 데이터 시각화를 생성하는 유명한 파이썬 라이브러리다.

- 존 D. 헌터가 만들었고 지금은 많은 개발 팀이 유지하고 있다.

- 출판물에 필요한 그래프를 만드는 데 맞춰 설계되었다.

- 기본 시각화 도구로 가장 안전한 선택이라고 생각한다.

4. IPython과 Jupyter

- IPython(아이파이썬, 인터랙티브 파이썬(Interactive Python))은 더 나은 대화형(인터랙티브) 파이썬 인터프리터를 만들 목적으로 2001년 페르난도 페레즈가 취미 프로젝트로 시작했다.

- IPython 자체는 계산이나 데이터 분석 도구로서의 기능을 제공하지는 않지만 대화형 컴퓨팅과 소프트웨어 개발 양쪽 모두에서 생산성을 극대화할 수 있도록 설계되었다.

- IPython은 많은 프로그래밍 언어들의 특징인 전통적인 편집-컴파일-실행 방식 대신에 실행-탐색 방식을 장려하며 파일시스템과 운영체제 셸에도 쉽게 접근할 수 있다.

- 2014년 페르난도와 IPython 팀은 언어에 상관없이 대화형 컴퓨팅 도구를 설계할 수 있는 주피터(Jupyter) 프로젝트를 발표했다.

- IPython 시스템은 이제 주피터에서 파이썬을 사용할 수 있게 해주는 커널(프로그래밍 언어 모드)로 역할을 변경했다.

- 주피터 노트북에서도 IPython 시스템을 여전히 사용할 수 있는데, '노트북'이라고 하는 웹 기반의 대화형 코드 작성 환경은 다양한 프로그래밍 언어를 지원한다.

- 주피터 노트북 시스템은 노트북 내용을 마크다운이나 HTML로 저장할 수 있게 한다.

- 이를 통해 코드와 텍스트를 포함하는 문서를 생성할 수 있다.

- 다른 프로그래밍 언어도 주피터 환경을 위한 커널이 구현되어 있다면 파이썬 대신 주피터 환경에서 사용할 수 있다.

- 개인적으로 파이썬 코드를 실행하거나 디버깅, 테스트 작업을 할 때는 거의 항상 IPython을 사용한다.

5. SciPy

- SciPy(사이파이)는 과학 계산 컴퓨팅 영역의 여러 기본 문제를 다루는 패키지 모음이다.

- 다음은 SciPy에 포함된 패키지 중 일부다.

```

scipy.integrate - 수치적분 루틴과 미분방적식 풀이법

scipy.linalg - numpy.linalg에서 제공하는 것보다 더 확장된 선형대수 루틴과 매트릭스 분해

scipy.optimize - 함수 최적화기와 방정식의 근을 구하는 알고리즘

scipy.signal - 시그널 프로세싱 도구

scipy.sparse - 희소 행렬과 희소 선형 시스템 풀이법

scipy.special - 감마 함수처럼 흔히 사용되는 수학 함수를 구현한 포트란 라이브러리인 SPECFUN 래퍼

scipy.stats - 표준 연속/이산 확률 분포(밀도 함수, 샘플러, 연속 분포 함수)와 다양한 통계 테스트 그리고 좀 더 기술적인 통계도구

```

- NumPy와 SciPy를 함께 사용하면 전통적인 과학 계산 애플리케이션에서 제공하는 거의 모든 기능을 대체할 수 있다.

6. scikit-learn

- scikit-leran(사이킷런)은 처음 개발되기 시작한 2010년부터 파이썬 개발자를 위한 범용 머신러닝 도구로 자리 잡기 시작했다.

- 다음과 같은 모델의 하위모듈을 포함한다.

```

분류: SVM, 최근접 이웃, 랜덤 포레스트, 로지스틱 회귀 등

회귀: 라소, 리지 회귀 등

클러스터링: K-평균, 스펙트럴 클러스터링 등

차원 축소: PCA, 특징 선택, 행렬 인수분해 등

모델 선택: 격자탐색, 교차검증, 행렬

전처리: 특징 추출, 정규화

```

7. statsmodels

- statsmodels은 다양한 R 언어용 회귀분석 모델을 구현한 스탠퍼드 대학의 통계학 교수인 조나단 테일러의 작업을 기반으로 만들어진 통계분석 패키지다.

- 스키퍼 시볼드와 죠세프 퍼크톨드가 2010년에 새로운 statsmodels 프로젝트를 시작한 이후 수많은 사용자와 오픈소스 기여자에게 빼놓을 수 없는 프로젝트로 성장했다.

- 나다니엘 스미스는 R 언어의 포뮬러 시스템에서 착안하여 statsmodels용 포뮬러 또는 모델 명세 프레임워크를 제공하는 Patsy(팻시) 프로젝트를 개발했다.

- scikit-learn과 비교하여 statsmodels는 전통적인 통계(주로 빈도주의적 접근)와 계량경제학 알고리즘을 포함하고 있다.

- 다음과 같은 하위모듈을 포함한다.

```

회귀 모델: 선형회귀, 일반화 선형 모델, 로버스트 선형 모델, 선형 혼합효과 모델 등

분산분석(ANOVA: analysis of variance)

시계열분석: AR, ARMA, ARIMA, VAR 및 기타 모델

비모수 기법: 커널밀도추정, 커널회귀

통계 모델 결과의 시각화

```

- statsmodels는 통계추론에 좀 더 초점을 맞추고 있다.

- 인자를 위한 불확실성 예측치와 p 값을 제공한다.

- 반면 scikit-learn은 좀 더 예측에 초점을 맞추고 있다.

# IPython

1. 탭 자동완성 

- an<탭키>

2. 자기관찰 ?

- add_numbers?, print?

- ??를 사용하면 가능한 경우 함수의 소스 코드도 보여준다. add_number??

- 와일드카드 기호와 함께 사용한 문자와 일치하는 모든 이름을 보여준다. np.*load*?

3. %run 명령어

- %run 명령어를 사용하면 IPython 세션 안에서 파이썬 프로그램 파일을 불러와서 실행할 수 있다.

4. 매직 명령어

- $quickref, $magic 등 사용 가능한 모든 특수 명령어를 살펴보는 것도 좋다.

# 시맨틱

- 파이썬은 가독성과 명료성 그리고 명백함을 강조한다.

- 한 줄에 여러 문장을 쓰는 것은 가독성을 해친다는 이유로 파이썬에서는 지양하는 습관이다.

- 파이썬 언어의 중요한 특징 중 하나는 객체 모델의 일관성이다.

- 파이썬에서 모든 객체는 특정한 자료형(또는 클래스)을 가지며 어떤 명백한 상황에서만 묵시적인 변환을 수행하는 자료형을 구분하는 강한 타입의 언어라고 한다.

- isinstance 함수를 이용해 어떤 객체가 무슨 자료형인지 검사할 수 있다.

- is와 is not은 변수가 None인지 검사하기 위해 흔히 사용한다.

- 뮤터블, 이뮤터블 객체

```

파이썬에서 리스트, 사전, NumPy 배열 또는 사용자 정의 클래스 같은 대부분의 객체는 변경 가능하다(뮤터블)

문자열이나 튜플은 변경 불가능하다(이뮤터블)

```

# 스칼라형

- 파이썬은 숫자 데잍어ㅘ 문자열, 불리언값(True or False) 그리고 날짜와 시간을 다룰 수있는 몇몇 내장 자료형을 제공한다.

- 이런 '단일 값'을 담는 자료형을 스칼라 타입이라고 한다.

```

None - 파이썬의 'Null' 값 (하나의 유일한 None 인스턴스만 존재한다.)

str - 문자열 자료형. 유니코드(UTF-8 인코딩) 문자열

bytes - Raw ASCII 바이트(또는 바이트로 인코딩된 유니코드)

float - 배정밀도(64비트) 부동소수점수. double 형은 따로 존재하지 않는다

bool - True or False

int - 부호가 있는(음수 표현이 가능한) 정수. 값의 범위는 플랫폼에 의존적

```

# 자료구조와 순차 자료형

# 튜플

1. 튜플은 1차원의 고정된 크기를 가지는 변경 불가능한 순차 자료형이다.

2. 튜플을 생성하는 가장 쉬운 방법은 쉼표로 구분된 값을 대입하는 것이다.

- tup = 1, 2, 3 => (1, 2, 3)

3. 괄호를 사용해서 값을 묶어줌으로써 중첩된 튜플을 정의할 수 있다. tup = (4, 5, 6), (7, 8) => ((4, 5, 6), (7, 8))

4. + 연산자를 이용해서 튜플을 이어붙일 수 있다. (4, None, 'foo') + (6, 0) + ('bar', ) => (4, None, 'foo', 6, 0, 'bar')

# 튜플에서 값 분리하기

1. 튜플과 같은 표현의 변수에 튜플을 대입하면 파이썬은 등호(=) 오른쪽에 있는 변수에서 값을 분리한다.

```

tup = 4, 5, 6

a, b, c = tup

a = 4, b = 5, c = 6

파이썬에서는 다음과 같이 하여 두 변수의 값을 쉽게 바꿀 수 있다.

b, a = a, b

튜플이나 리스트를 순회할 때도 흔히 이 기능을 활용한다

seq = [(1, 2, 3), (4, 5, 6), (7, 8, 9)]

for a, b, c in seq:
    print('a={0}, b={1}, c={2}'.format(a, b, c))


a=1, b=2, c=3
a=4, b=5, c=6
a=7, b=8, c=9



```

# 리스트

1. 정렬

```

sort 함수를 이용해서 새로운 리스트를 생성하지 않고 있는 그대로 리스트를 정렬할 수 있다.

sort는 편의를 위해 몇 가지 옵션을 제공한다.

b = ['saw', 'small', 'he', 'foxes', 'six']

b.sort(key=len)

['he', 'saw', 'six', 'small', 'foxes']

```

2. 슬라이싱

```

HELLO!

string[2:4]

LL

string[-5:-2]

ELL

두 번째 콜론 다음에 간격(step)을 지정할 수 있는데, 하나 걸러 다음 원소를 선택하려면 다음과 같이 표현된다.

seq = [7, 2, 3, 6, 3, 5, 6, 0, 1]

seq[::2]

[7, 3, 3, 6, 1]

간격 값으로 -1을 사용하면 리스트나 튜플을 역순으로 반환한다.

seq[::-1]

[1, 0, 6, 5, 3, 6, 3, 2, 7]

```

# 내장 순차 자료형 함수

1. enumerate

- 순차 자료형에서 현재 아이템의 색인을 함께 처리하고자 할 때 흔히 사용한다.

```

i = 0

for value in collection:
    # value를 사용하는 코드
    i += 1

for i, value in enumerate(collection):
    # value를 사용하는 코드 작성

색인을 통해 데이터에 접근할 때 enumerate를 사용하는 유용한 패턴은 순차 자료형에서의 값과 그 위치를 dict에 넘겨주는 것이다.



```