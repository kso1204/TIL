# VPC

1. Amazon Virtual Private Cloud (Amazon VPC)를 사용하면 정의한 가상 네트워크에서 AWS 리소스를 시작할 수 있습니다.

2. 이 가상 네트워크는 AWS의 확장 가능한 인프라를 사용하는 이점이 있다는 점에서 자체 데이터 센터에서 운영하는 기존 네트워크와 매우 유사합니다.

# VPC의 주요 개념

1. Virtual Private Cloud (VPC) - AWS 계정 전용 가상 네트워크

2. 서브넷 - VPC의 IP 주소 범위

3. 라우팅 테이블 - 네트워크 트래픽이 전달되는 위치를 결정하는 데 사용되는 라우팅이라는 규칙 집합

4. 인터넷 게이트웨이 - VPC의 리소스와 인터넷 간의 통신을 활성화하기 위해 VPC에 연결하는 게이트웨이

5. VPC 엔드포인트 - 인터넷 게이트웨이, NAT 디바이스, VPN 연결 또는 AWS Direct Connect 연결 없이도 PrivateLink로 지원되는? AWS 서비스 및 VPC 엔드 포인트 서비스에 VPC를 비공개로 연결할 수 있다.

6. VPC의 인스턴스는 서비스의 리소스와 통신하는 데 퍼블릭 IP 주소가 필요하지 않다? VPC와 다른 서비스 간의 트래픽은 Amazon 네트워크를 크게 벗어나지 않다?

7. https://docs.aws.amazon.com/vpc/latest/userguide/endpoint-services-overview.html

8. AWS PrivateLink는 VPC와 서비스 간의 트래픽을 인터넷에 노출하지 않고 가상 사설 클라우드 (VPC)와 AWS 또는 온 프레미스에서 호스팅되는 서비스간에 프라이빗 연결을 설정합니다.

9. AWS PrivateLink를 사용하려면 VPC에서 서비스에 대한 VPC 엔드 포인트를 생성하십시오. 

10. 지원되는 서비스에 필요한 VPC 엔드 포인트 유형을 생성합니다. 

11. 이렇게하면 서비스로 향하는 트래픽의 진입 점 역할을하는 프라이빗 IP 주소를 사용하여 서브넷에 탄력적 인 네트워크 인터페이스가 생성됩니다.

12. 다음 다이어그램은 VPC를 AWS PrivateLink를 지원하는 AWS 서비스에 안전하게 연결하기위한 기본 아키텍처를 보여줍니다.

# VPC 및 서브넷

1. 가상 사설 클라우드 (VPC)는 AWS 계정 전용 가상 네트워크입니다. 

2. AWS 클라우드의 다른 가상 네트워크와 논리적으로 격리됩니다.

3. Amazon EC2 인스턴스와 같은 AWS 리소스를 VPC로 시작할 수 있습니다.

4. VPC의 IP 주소 범위를 지정하고, 서브넷을 추가하고, 보안 그룹을 연결하고, 라우팅 테이블을 구성 할 수 있습니다.

5. 서브넷은 당신의 VPC에서 IP 주소의 범위이다.

6. 지정된 서브넷으로 AWS 리소스를 시작할 수 있습니다.

6. 인터넷에 연결해야하는 리소스에는 퍼블릭 서브넷을 사용하고 인터넷에 연결되지 않을 리소스에는 프라이빗 서브넷을 사용합니다.

7. 각 서브넷의 AWS 리소스를 보호하기 위해 보안 그룹 및 네트워크 액세스 제어 목록 (ACL)을 포함한 여러 보안 계층을 사용할 수 있습니다.

8. 선택적으로 IPv6 CIDR 블록을 VPC와 연결하고 VPC의 인스턴스에 IPv6 주소를 할당 할 수 있습니다.

# VPC 및 서브넷 기본 사항

1. https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Subnets.html#vpc-subnet-basics

1. 기본 라우팅 테이블에는 다음과 같은 경로가 있습니다.

```

목적지	표적

10.0.0.0/16	현지

VPC는 리전의 모든 가용 영역에 걸쳐 있습니다.

VPC를 생성 한 후 각 가용 영역에 하나 이상의 서브넷을 추가 할 수 있습니다.

```

2. 서브넷의 트래픽이 인터넷 게이트웨이로 라우팅되는 경우 서브넷을 퍼블릭 서브넷이라고 합니다.

3. 이 다이어그램에서 서브넷 1은 퍼블릭 서브넷입니다.

4. 퍼블릭 서브넷의 인스턴스가 IPv4를 통해 인터넷과 통신하도록하려면 퍼블릭 IPv4 주소 또는 탄력적 IP 주소 (IPv4)가 있어야합니다.

5. 공용 IPv4 주소에 대한 자세한 내용은 공용 IPv4 주소를.

6. 퍼블릭 서브넷의 인스턴스가 IPv6를 통해 인터넷과 통신하도록하려면 IPv6 주소가 있어야합니다.

7. 서브넷에 인터넷 게이트웨이에 대한 경로가없는 경우 서브넷을 프라이빗 서브넷이라고 합니다.

8. 이 다이어그램에서 서브넷 2는 프라이빗 서브넷입니다.

9. 서브넷에 인터넷 게이트웨이에 대한 경로가 없지만 Site-to-Site VPN 연결을 위해 트래픽이 가상 프라이빗 게이트웨이로 라우팅 된 경우 서브넷을 VPN 전용 서브넷이라고 합니다.

10. 이 다이어그램에서 서브넷 3은 VPN 전용 서브넷입니다. 현재 우리는 Site-to-Site VPN 연결을 통한 IPv6 트래픽을 지원하지 않습니다.

11. https://docs.aws.amazon.com/vpn/latest/s2svpn/VPC_VPN.html

12. VPN 연결 : 온 프레미스 장비와 VPC 간의 보안 연결입니다.

13. VPN 터널 : 데이터가 고객 네트워크에서 AWS로 또는 AWS로 전달 될 수있는 암호화 된 링크입니다.

14. 각 VPN 연결에는 고 가용성을 위해 동시에 사용할 수있는 두 개의 VPN 터널이 포함됩니다.

15. 고객 게이트웨이 : 고객 게이트웨이 디바이스에 대한 정보를 AWS에 제공하는 AWS 리소스입니다.

16. 고객 게이트웨이 장치 : Site-to-Site VPN 연결의 사용자 측에있는 물리적 장치 또는 소프트웨어 애플리케이션입니다.

17. 가상 프라이빗 게이트웨이 : Site-to-Site VPN 연결의 Amazon 측에있는 VPN 집중 장치. 가상 프라이빗 게이트웨이 또는 전송 게이트웨이를 Site-to-Site VPN 연결의 Amazon 측 게이트웨이로 사용합니다.

18. Transit gateway : VPC와 온 프레미스 네트워크를 상호 연결하는 데 사용할 수있는 전송 허브입니다. 전송 게이트웨이 또는 가상 프라이빗 게이트웨이를 Site-to-Site VPN 연결의 Amazon 측 게이트웨이로 사용합니다.

# 보안그룹과 ACL

1. https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Security.html

# VPC의 IP 주소 지정

1. 프라이빗은.. 인터넷에 접근이 안 된다는데 이 부분이 잘 이해가 안간다  -> 인터넷을 통한 IPv4 통신을 활성화하려면 인스턴스에 퍼블릭 IPv4 주소 또는 인스턴스의 프라이빗 IPv4 주소와 연결된 탄력적 IP 주소가 있어야합니다.

1. https://docs.aws.amazon.com/vpc/latest/userguide/vpc-ip-addressing.html

# 인터넷 게이트웨이

1. https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Internet_Gateway.html

1. 인터넷 게이트웨이는 VPC와 인터넷 간의 통신을 허용하는 수평 확장, 중복 및 고 가용성 VPC 구성 요소입니다.

2. 인터넷 게이트웨이는 인터넷 라우팅 가능 트래픽에 대해 VPC 라우팅 테이블에 대상을 제공하고 퍼블릭 IPv4 주소가 할당 된 인스턴스에 대해 NAT (네트워크 주소 변환)를 수행하는 두 가지 용도로 사용됩니다.

3. 자세한 내용은 인터넷 액세스 활성화를 참조 하십시오 .

- https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Internet_Gateway.html#vpc-igw-internet-access

4. 인터넷 게이트웨이는 IPv4 및 IPv6 트래픽을 지원합니다. 네트워크 트래픽에 가용성 위험이나 대역폭 제약을 일으키지 않습니다. 계정에 인터넷 게이트웨이가있는 경우 추가 요금이 없습니다.

```

인터넷 액세스 활성화

VPC의 서브넷에있는 인스턴스에 대한 인터넷 액세스를 활성화하려면 다음을 수행해야합니다.

인터넷 게이트웨이를 생성하고 VPC에 연결합니다.

인터넷 바인딩 된 트래픽을 인터넷 게이트웨이로 보내는 서브넷의 라우팅 테이블에 경로를 추가합니다.

서브넷의 인스턴스에 전역 적으로 고유 한 IP 주소 (퍼블릭 IPv4 주소, 탄력적 IP 주소 또는 IPv6 주소)가 있는지 확인합니다.

네트워크 액세스 제어 목록 및 보안 그룹 규칙이 관련 트래픽이 인스턴스를 오가는 것을 허용하는지 확인하십시오.

퍼블릭 및 프라이빗 서브넷

서브넷이 인터넷 게이트웨이에 대한 경로가있는 라우팅 테이블과 연결된 경우이를 퍼블릭 서브넷이라고 합니다.

서브넷이 인터넷 게이트웨이에 대한 경로가없는 라우팅 테이블과 연결된 경우이를 프라이빗 서브넷이라고 합니다.

퍼블릭 서브넷의 라우팅 테이블에서 라우팅 테이블에 명시 적으로 알려지지 않은 모든 대상 ( 0.0.0.0/0IPv4 또는 ::/0IPv6의 경우) 에 대한 인터넷 게이트웨이의 경로를 지정할 수 있습니다.

또는 더 좁은 범위의 IP 주소로 경로 범위를 지정할 수 있습니다.

예를 들어 AWS 외부에있는 회사 퍼블릭 엔드 포인트의 퍼블릭 IPv4 주소 또는 VPC 외부에있는 다른 Amazon EC2 인스턴스의 탄력적 IP 주소입니다.

IP 주소 및 NAT

인터넷을 통한 IPv4 통신을 활성화하려면 인스턴스에 퍼블릭 IPv4 주소 또는 인스턴스의 프라이빗 IPv4 주소와 연결된 탄력적 IP 주소가 있어야합니다.

인스턴스는 VPC 및 서브넷 내에 정의 된 프라이빗 (내부) IP 주소 공간 만 인식합니다.

인터넷 게이트웨이는 인스턴스를 대신하여 논리적으로 일대일 NAT를 제공하므로 트래픽이 VPC 서브넷을 떠나 인터넷으로 이동할 때 응답 주소 필드가 인스턴스의 퍼블릭 IPv4 주소 또는 탄력적 IP 주소로 설정됩니다. 

, 개인 IP 주소가 아닙니다. 거꾸로,

IPv6에 대해 인터넷을 통한 통신을 활성화하려면 VPC 및 서브넷에 연결된 IPv6 CIDR 블록이 있어야하며 인스턴스에 서브넷 범위의 IPv6 주소가 할당되어야합니다.

IPv6 주소는 전역 적으로 고유하므로 기본적으로 공개됩니다.

다음 다이어그램에서 VPC의 서브넷 1은 퍼블릭 서브넷입니다.

모든 인터넷 바운드 IPv4 트래픽을 인터넷 게이트웨이로 가리키는 사용자 지정 라우팅 테이블과 연결됩니다.

인스턴스에는 인터넷과의 통신을 가능하게하는 탄력적 IP 주소가 있습니다.

```

5. 퍼블릭 IP 주소를 할당하지 않고 인스턴스에 인터넷 액세스를 제공하려면 대신 NAT 디바이스를 사용할 수 있습니다.

6. NAT 디바이스를 사용하면 프라이빗 서브넷의 인스턴스가 인터넷에 연결할 수 있지만 인터넷의 호스트가 인스턴스와의 연결을 시작하지 못합니다. 

7. 자세한 정보는 VPC 용 NAT 디바이스 단원을 참조하십시오 .

- https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat.html

8. NAT 디바이스를 사용하여 프라이빗 서브넷의 인스턴스가 인터넷, 다른 VPC 또는 온 프레미스 네트워크에 연결하도록 허용 할 수 있습니다. 

9. 이러한 인스턴스는 VPC 외부의 서비스와 통신 할 수 있지만 원치 않는 연결 요청을 받을 수는 없습니다.

10. NAT 장치는 인스턴스의 소스 IPv4 주소를 NAT 장치의 주소로 바꿉니다.

11. 인스턴스로 응답 트래픽을 보낼 때 NAT 디바이스는 주소를 다시 원래 소스 IPv4 주소로 변환합니다.

12. NAT 게이트웨이 라고하는 AWS에서 제공하는 관리 형 NAT 디바이스를 사용 하거나 NAT 인스턴스 라고하는 EC2 인스턴스에서 고유 한 NAT 디바이스를 생성 할 수 있습니다.

13. NAT 게이트웨이는 더 나은 가용성과 대역폭을 제공하고 관리하는 데 드는 노력이 적기 때문에 사용하는 것이 좋습니다.

